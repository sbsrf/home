---
title: 声笔飞讯
date: 2023-03-08 16:43:31
tags:
- 声笔
- 飞讯
- 顶功
typora-root-url: ..\..\public
---

## 1 飞讯概述

声笔飞讯，简称飞讯，是从著名顶功输入方案声笔飞码衍生出来的主单顶功方案，随着其词组能力的不断加强，几乎到达了字词双全的地步，对用户越来越有吸引力，特别是对追求极致效率的人更是如此。所以也自然而然地成长为一个独树一帜的方案，有太多的内容需要特别地讲解，值得独立出来专门进行论述了。本文是图文教程，视频教程请移步[声笔输入法边播边讲231231](https://www.bilibili.com/video/BV1zN4y1x7o7/)，可以参照学习。

飞讯一直就具有出色的单字能力，它在纯单盲打方面大放异彩，以超短的平均码长取得极高的输入效率，适用于冗余度小的复杂文本，如文言文、散文和诗赋等。另一方面，它可以巨型的词库来轻松和高效地应对具有大量非单字词汇的高冗余度文本，如政经、科技和医学类文章。在增强模式下，通过使用大量简词、静态词，可以进一步缩短码长和提高击键，通过动态四二顶又能缩短其它词组的码长。无论哪种情况，飞讯都能很好地适配。不管是日常工作学习使用，还是参加打字比赛，飞讯都能完美胜任。

由于飞讯的单字模式与飞单完全相同，同时对于单字派来说，可能只关心和使用飞单，所以单字模式是独立成章进行讲解的。若您是初学者，请务必先了解和掌握[声笔飞单](../sbfd/)，然后再回过头来继续学习下面的词组模式。

## 2 词组模式

我们先用几节的篇幅详细讲解常规的词组模式，然后再用一节来讲解增强词组模式时多出的内容。

### 2.1 单字输入

在词组模式下，飞讯单字输入的码长与在单字模式下完全一样，但有一个非常重要的区别：飞讯的二简字顶屏会延迟一码（四二顶）或两码（五二顶），也即采用了所谓的延迟顶。根据后续字的类型不同，延迟顶分为三种情况。

第一种情况是，在后接一简字时，需要与一简字一起用空格上屏或者用标点顶屏。例如，「好的」用空格上屏时的用键为`had_`，而「即是」用逗号顶屏时的用键为`jgs,`。也就是说，在输入第二字的首码时，并不会像在单字模式下那样立刻就将首字顶上屏幕。

![image-20240608162549351](/images/image-20240608162549351.png)

![image-20240608162606002](/images/image-20240608162606002.png)

第二种情况是，在后接非一简字和非声笔字时，采用了延迟一码的四二顶，用第四码顶前两码的二简字上屏。例如，「爱情」输入前三码`vzq`后，「爱」字并不会上屏，而需要在输入第四码（即「情」的第二码）后，「爱」字才被顶上屏幕，留下「情」字。

![image-20230805152731261](/images/image-20230805152731261.png)

![image-20230310112740159](/images/image-20230310112740159.png)

第三种情况是，在后接声笔字时，采用了延迟两码的五二顶，用第五码顶前两码的二简字上屏。例如，「好事」一词，在输入了`hase`之后，「好事」并不会上屏，还需要有后续的输入才能被顶上屏幕。假设后面要接着输入「者」字，那么在输入该字的第一码后，「好」字将被顶上屏，留下「事在」，对应的编码为`sez`。可以再接着输入「者」的后续编码来完成输入。

![image-20230310112250252](/images/image-20230310112250252.png)

![image-20230805152837989](/images/image-20230805152837989.png)

### 2.2 词组输入

飞讯二字词的编码格式为`s1z1s2b2b2`，即首字的前两码加次字的首码和次字的前两笔，例如：`一直yhzei 大佬delui 简码jpmeu 半角bdjua 蝴蝶hcdia 奔驰bdcaa`等。由于飞讯的词组输入需要五码，所以在用单字输入的时候不超过五码的二字词是不建议用词组的方式来输入的。不过，为了降低使用难度，飞讯并没有禁用低效的词组，而由用户自己选择何时使用词组方式。有的时候，为了手感，也可能会用词组。

![image-20240517114352055](/images/image-20240517114352055.png)

![image-20240517114431882](/images/image-20240517114431882.png)

飞讯三字词的编码格式为`s1s2s3b3b3`，即各字的首码加末字的前两笔，例如：`计算机jsjei 新世纪xsjaa 大无畏dwwia`等。三字词一般建议使用词组的方式来输入，以便节约用键。可能的例外情况是由两键字（一、二简字和声笔字）构成的三字词，如「好起来」「不知道」等，它们用单字输入也才六键，而键速可能更快，因为单字更容易形成条件反射。具体怎么打好，就看用户自己的使用习惯了。

![image-20240517114516393](/images/image-20240517114516393.png)

![image-20240517114531073](/images/image-20240517114531073.png)

飞讯多字词的编码格式为`s1s2s3b0b0`，其中的0表示末字，即前三字的首码加末字的前两笔，例如：`呼风唤雨hfhei 风雨同舟fytuu 生龙活虎slhie`等。

![image-20240517114611377](/images/image-20240517114611377.png)

![image-20240517114625298](/images/image-20240517114625298.png)

考虑到有的成语用字比较生僻，飞讯也支持第四码用声母，以完全避免用到笔画，但是第四码得用大写来输入，例如：`呼风唤雨hfhY 风雨同舟fytZ 生龙活虎slhH`等。但是请注意，在提示行显示的仍然是小写字母。

![image-20240504180459682](/images/image-20240504180459682.png)

![image-20240504180515150](/images/image-20240504180515150.png)

### 2.3 扩展编码

飞讯的词组支持扩展编码，在重码多的时候，可以追加首字的前两笔来快速区分重码。比如，「语用学」一词在第一次输入时，输入 `yyxoo` 后需要在第九页才能找到，如下图所示。每一页，都需要用眼睛扫视 6 个选项，人机交互频繁，对击键率影响很大，效率很低。

![image-20240517115016891](/images/image-20240517115016891.png)

![image-20240517115035930](/images/image-20240517115035930.png)

![image-20240517115054027](/images/image-20240517115054027.png)

![image-20240517115107251](/images/image-20240517115107251.png)

![image-20240517115123858](/images/image-20240517115123858.png)

![image-20240517115142915](/images/image-20240517115142915.png)

![image-20240517115200803](/images/image-20240517115200803.png)

![image-20240517115218483](/images/image-20240517115218483.png)

![image-20240517115237258](/images/image-20240517115237258.png)

然而，如果发现首页没有该词就追加首字前两个笔画 `oa` 的话，「语用学」就出现在第二页上，只需翻页一次，用 `u` 选择上屏就可以了，如所示。

![image-20240517115444579](/images/image-20240517115444579.png)

![image-20240517115500354](/images/image-20240517115500354.png)

由于动态调频的作用，在选择一个用扩展编码输入的词组后，下次再输入时码长就会缩短，一般只用五键就可以输入了。比如，上例在用`i`选择「语用学」后，下文再输入时常常就只需要`yyxoo`即可。

### 2.4 冲突解决

在飞讯延迟顶的位置，有时无法使用缩减码，因为后三码被当作五码词组的一部分了，如果那正是你要的词就很好，但常常不是这样，于是就会发生冲突。

比如，在输入「狂kq」「喘cia」时，「kqcia」是常规词组的空间，上面往往会有其它词存在，产生冲突，从而无法将「狂」字顶上屏幕，如下图所示。

![image-20240517115558042](/images/image-20240517115558042.png)

如果继续输入，将会把「昆虫」这个词一起顶上屏，而不是顶「狂」字上屏。为了解决这个问题，特提供了巧妙的办法，即采用编码变换用分号将编码`kqcia`变为`kq_cia_`（其中下划线表示空格），而将「狂喘」上屏。

在用户预知会发生冲突时，也可以第五码采用大写字母，强制将首字顶上屏。比如，上例用`kqciA`就可以将kq对应的「狂」字上屏，而留下`cia`，因为大写的A会自动变换为小写的a。

当然，在常规模式下彻底解决冲突的办法是完全不使用缩减码。

### 2.5 组合变换

除了顶屏之外，组合变换也是节约用键和离散重码的重要手段。大量一、二简字的组合，不管是不是词组，都可以通过这种方式来进行输入。注意，这个时候是没有提示的，需要用户对简字非常熟习才能灵活自如。编码变换一般通过分号键触发，有时也通过Tab键和单引号触发。

(1) 一简字与一简字的组合

例如，「个人」一词，虽然可以按词组的方式用`grrp`来输入。更好的方式是当成两个一简字用`g_r_`来输入，其中下划线表示空格。然而，最好的方式则是采用编码变换，用`gr;`来输入，可以节约一次用键。

(2) 一简字与二简字的组合

例如，「一会」可以用`yhu;`代替`yhhu`来输入，虽然不能节约用键，但是输入变得确定了，而且可以将`yhhu`的首选让给「与会」，就起到了离散重码的作用。同样，「一场」可以用`yct;`来输入。

(3) 二简词与一简字的组合

二简词与一简字可以组合起来通过Tab一起上屏，从而节约一次空格键。例如，「我们的」在常规输入时，得用`wm + Tab + d + 空格`，而利用组合变换后就只需`wmd + Tab`了。

(4) 一简字与二简词的组合

一简字与二简词可以组合起来通过单引号一起上屏，从而节约一次空格键。例如，「的时候」在常规输入时，得用`d + 空格 + sh + Tab`，而利用组合变换后就只需`dsh'`了。

(5) 三个一简字的组合，可以用Shift+空格来输入，手机上可下滑空格。例如，「一个人」「就是了」「是不是」「不是不」等都可以这样输入。

### 2.6 词组过滤

如果用户习惯一直用第四码大写来输入多字词，那么就可以将飞讯schema文件中Translator下的enable_filtering选项设置为true，以过滤掉`szsbb`上的多字词，以减少重码。默认的forced_selection选项为true，还可强制在`szsbb`上选择重码，从而减少扩展编码时的重码。这样设置对操作熟练的高级用户来说是非常有用的，可以减少很多重码，提高可盲打性，如下图所示。

![image-20230311000814969](/images/image-20230311000814969.png)

## 3 快顶模式

### 3.1 缩短码长

飞讯在默认的慢顶模式下，美中不足就是词组需要五码才能输入，这就增加了平均码长，在一定程度上抵消了飞讯在单字输入方面的优势。有没有办法使飞讯的词组也只需要四码呢？有！飞讯在快顶模式下通过换码操作实现了这个目标。换码的原理是，将词组编码第四位上的笔画 `aeuio` 改用 `23789` 来编码输入，使得起始顶屏位和码长调整位都从第五位移动到第四位。

例如，「奔驰」在常规模式下输入用的是 `bdcaa`，而在快顶模式下则用 `bdc2`。

![image-20240517120245540](/images/image-20240517120245540.png)

如果接着输入「到」字的首码 `d`，「奔驰」就会被顶上屏幕。如果输入 `bdc2` 后，并不是想要的「奔驰」，那么就按正常的编码输入第五码。比如，若想输入的是「奔出」，那么就接着追加「出」字的第二笔。

![image-20240517120320555](/images/image-20240517120320555.png)

接下来的重码选择和扩展编码就和常规模式一模一样了。如果这时用 `a` 选择了「 表达出」，则「表达出」成为六时的首选。

![image-20240517120356899](/images/image-20240517120356899.png)

再次输入「表达出」时，可能就只需要四码了。

![image-20240517120433219](/images/image-20240517120433219.png)

由于少加了一个笔画，飞讯在四码顶屏时的编码空间只有飞码在五码顶屏时空间的五分之一，能容纳的四码词数量也就少得多，虽然缩短了码长，但会增加飞讯词组的动态性，增强查看候选项的时间，从而降低其可盲打性。所以，在竞速打赛文时，对词组的盲打要求比较高时，就不适合采用快顶。然而，在实际码字时，用户的应用场景比较狭窄，四码时词组的命中率会非常高，码长明显缩短，那么采用快顶就非常适合了。

### 3.2 避免冲突

飞讯在默认的慢顶模式下，当词组第四位上的笔画用`aeuio`来编码，同时又在使用单字的缩减码时，就可能会发生冲突。在设置为快顶模式时，就可以避免这类冲突，从而毫无顾忌地使用缩减码，因为此时的单字均是四二顶，在第四码时就一定会把二简字顶上屏。

例如，在慢顶模式下，输入`jyjua`时，会提示下面的词组。

![image-20240517120540011](/images/image-20240517120540011.png)

然而，在快顶模式下，在`jyj`后接着输入时u就将「记」顶上屏幕了，留下`ju`。

![image-20230805152938877](/images/image-20230805152938877.png)

![image-20230602112043761](/images/image-20230602112043761.png)

所以，飞讯的快顶模式除了输入二简字输入比声笔飞单延迟一码外，是完全兼容声笔飞单的，同时会强制用户采用词组的四码起顶方式，只是常规词组第四码必须用23789，对用户的操作技能要求很高。不过，一旦掌握，就真正能够无冲突地实现二码顶字和四码顶词。

## 4 增强模式

为了缩短词组码长和增加输入确定性，提高输入效率，特为飞讯提供了数选字和数选词，可以在增强模式下使用。

如果要临时使用增强模式，在电脑上可以用 Ctrl+~ 或 F4，在手机上直接点击状态栏的「常规 / 增强」项，就可以切换状态了。如果要将增强模式设置为默认状态，只要将 sbfx.schema.yaml 文件中的 is_enhanced 开关项的 reset 值由 0 改为 1，并重新部署一下就可以了。

数选字词的基本用法请参见[飞单增强模式](../sbfd/#_5-增强模式)。这里只讲飞讯特有的情况，也就是说在第三码后接数字时，可以使用延迟顶屏来省略空格。由于没有提示，所以要求用户记住了数选字才能这么操作。

例如，在输入「两禁」时，通常得用`lh_j3`，但是由于有了延迟顶屏，就只用 `lhj3` 就可以输入了。

在增强模式下使用缩减码变换，还可以避免与词组编码冲突。这种变换是将缩减码第三码的`aeuio`改为用`23789`来输入。比如，「狂」「喘」的编码`kqcia`改为`kqci2`来输入，就可以避免和「昆虫」冲突。这时，会通过延迟顶屏将「狂」上屏，再用`ci2`来输入「喘」。

## 5 快顶增强

快顶模式和增强模式在默认时都没有打开，用户可以单独打开一项，也可以两者同时打开，结合起来使用，进一步提高飞讯的输入上限。

不过，在快顶增强模式下，`szsn`词组可能与二简字加数选单字有冲突，也可能与一简字加数选词冲突，这时解决冲突的办法是，前者可采用分号来上屏两个二简字字，后者采用单引号来上屏一简字和数选词。

例如，在想用单字输入「两」「极」两个字时，输入编码lhj3后，提示行出现的可能是「老虎机」这个二字词。

![image-20231108113218125](/images/image-20231108113218125.png)

如果想完全避免数选字的冲突，可以放弃使用数选字，以便于单字的完全盲打。

## 附录：编码格式

为了便于用户总结和记忆飞讯的基本内容，现将飞讯的字词编码格式总结一下，编码格式采用了以下精简的表达方式。

> 单字 `sb, sp^bbx`
> 二字词 `s1z1s2b2b2^'b1b1x`
> 三字词 `s1s2s3b3b3^'b1b1x`
> 多字词 `s1s2s3b0b0^'b1b1x|s1s2s3S0x`

```
z = p|b
s = p = [qwrtsdfgzxcvbyphjklnm]
b|x = [aeuio]
```

其中：`^`表示起始顶屏位，字母后的数字表示词组中的第几个字，0特别地表示末字；`'`表示码长调整位；s表示声母（大写时表示用大写字母输入），p表示偏旁部首，b表示笔画，x表示选择键，`|`表示或者，z表示p或b。s 和 p 均采用 aeuio 以外的 21 个英文字母，b和x均采用 aeuio 这几个元音字母。

在快顶模式下，词组编码第四位上的笔画改用23789来编码的话，可使起始顶屏位和码长调整位都从第五位移动到第四位。

